import { User } from "lucide-react";
import { cn } from "../../../../../lib/utils";
import { EditableText, EmptyState } from "../../../shared";
import useBuildStore from "../../../../../store/Build.store";
import SectionHeader from "./SectionHeader";

/**
 * Personal Details Section for Shraddha template
 * Shows personal information like DOB, nationality, etc.
 */
export default function PersonalDetailsSection({ data = {}, sectionId }) {
  const updateSectionData = useBuildStore((state) => state.updateSectionData);

  const handleChange = (field, value) => {
    updateSectionData("personalDetails", { ...data, [field]: value });
  };

  const fields = [
    { key: "dateOfBirth", label: "Date of Birth" },
    { key: "nationality", label: "Nationality" },
    { key: "gender", label: "Gender" },
    { key: "maritalStatus", label: "Marital Status" },
    { key: "languages", label: "Languages" },
    { key: "passport", label: "Passport No." },
  ];

  const hasData = Object.values(data).some((v) => v);

  if (!hasData) {
    return (
      <div className="mb-4">
        <SectionHeader title="Personal Details" />
        <EmptyState
          title="No personal details added"
          description="Click to add personal information"
          onAdd={() => handleChange("dateOfBirth", "")}
          icon={User}
        />
      </div>
    );
  }

  return (
    <div className="mb-4">
      <SectionHeader title="Personal Details" />

      <div className="grid grid-cols-2 gap-x-6 gap-y-1">
        {fields.map((field) => (
          <div key={field.key} className="flex items-center gap-2 text-sm">
            <span className="text-gray-500 min-w-[100px]">{field.label}:</span>
            <EditableText
              value={data[field.key] || ""}
              onChange={(val) => handleChange(field.key, val)}
              placeholder={`Enter ${field.label.toLowerCase()}`}
              className="text-gray-700"
              as="span"
            />
          </div>
        ))}
      </div>
    </div>
  );
}
